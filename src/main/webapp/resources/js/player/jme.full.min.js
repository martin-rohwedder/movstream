(function(e){window.webshims||(e.webshims=e.webshims||{ready:function(e,t){t()},addReady:function(t){e(function(){t(document,e([]))})}},window.webshims=e.webshims);var t=e.webshims;window.Modernizr&&"opacity"in Modernizr||e("html").addClass("opacity"in document.documentElement.style?"opacity":"no-opacity");var n={},a={},i=!1;e(window).on("load",function(){i=!0;var t,n=function(){i=!0};e(window).on("scroll",function(){i=!1,clearTimeout(t),t=setTimeout(n,999)})}),e.jme={version:"2.0.8",classNS:"",options:{},plugins:{},data:function(t,n,a){var i=e(t).data(u+"jme")||e.data(t,u+"jme",{});return void 0===a?n?i[n]:i:(i[n]=a,void 0)},registerPlugin:function(e,t){this.plugins[e]=t,t.nodeName||(t.nodeName=""),t.className||(t.className=e)},defineMethod:function(e,t){a[e]=t},defineProp:function(t,a){a||(a={}),a.set||(a.set=a.readonly?function(){throw t+" is readonly"}:e.noop),a.get||(a.get=function(n){return e.jme.data(n,t)}),n[t]=a},prop:function(t,a,i){if(!n[a])return e.prop(t,a,i);if(void 0===i)return n[a].get(t);var r=n[a].set(t,i);void 0===r&&(r=i),"noDataSet"!=r&&e.jme.data(t,a,r)},setText:function(t,n){var a=t;t&&n&&(a={},a[t]=n),e.each(a,function(t,n){e.jme.plugins[t]&&(e.jme.plugins[t].text=n)})}};var r=!0;try{e.access(e(document.documentElement),"t",void 0,!0,e.noop)}catch(s){r=!1}e.fn.jmeProp=r?function(t,n){return e.access(this,t,n,!0,e.jme.prop)}:function(t,n){return e.access(this,e.jme.prop,t,n,arguments.length>1)},e.fn.jmeFn=function(t){var n,i=Array.prototype.slice.call(arguments,1);return this.each(function(){return n=(a[t]||e.prop(this,t)).apply(this,i),void 0!==n?!1:void 0}),void 0!==n?n:this};var o,l=[],u="";e.jme.createSelectors=function(){o||(u=e.jme.classNS,o="div."+u+"mediaplayer",e.each(e.jme.plugins,function(t,n){n.className=u+n.className,n.selector=n.nodeName+"."+n.className,l.push(n.selector),u&&n.pseudoClasses&&e.each(n.pseudoClasses,function(e,t){n.pseudoClasses[e]=u+t})}),l=l.join(","))},e.jme.initJME=function(t,n){e("video, audio",t).add(n.filter("video, audio")).filter("[data-muted]").each(function(){e.prop(this,"muted",!0)}).end().filter("[data-volume]").each(function(){var t=e(this).data("volume");1>=t&&t>=0&&e.prop(this,"volume",t)}),e(o,t).add(n.filter(o)).jmePlayer()};var c={emptied:1,pause:1};e.jme.getDOMList=function(t){var n=[];return t||(t=[]),"string"==typeof t&&(t=t.split(" ")),e.each(t,function(e,t){t&&(t=document.getElementById(t),t&&n.push(t))}),n},t.ready("dom-support",function(){t.defineNodeNamesProperty&&!e("<input />").prop("labels")&&t.defineNodeNamesProperty("button, input, keygen, meter, output, progress, select, textarea","labels",{prop:{get:function(){var t=[],n=this.id;return n&&(t=e('label[for="'+n+'"]')),t[0]||(t=e(this).closest("label",this.form)),t.get()},writeable:!1}})}),e.jme.getButtonText=function(t,n){var a=e("span.jme-text, +label span.jme-text",t),i=t.prop("labels");i=i&&i[0]?e(i).eq(0):!1,a[0]||(a=i||t);var r,s,o,l,u=a.text().split("/"),c=t.prop("title").split("/"),d=function(c){l!==c&&(l=c,s&&a.text(u[c||0]),o&&(t.prop("title",u[c||0]),i&&i.prop("title",u[c||0])),n&&t.removeClass(n[c?0:1]).addClass(n[c]),r&&(t.prop("checked",!!c),(t.data("checkboxradio")||{refresh:e.noop}).refresh()))};return 2==u.length&&(u[0]=u[0].trim(),u[1]=u[1].trim(),s=!0),2==c.length&&(c[0]=c[0].trim(),c[1]=c[1].trim(),o=!0),t.is('[type="checkbox"], [type="radio"]')?(t.prop("checked",function(){return this.defaultChecked}),r=!0):t.is("a")&&t.bind("click",function(e){e.preventDefault()}),d},e.fn.jmePlayer=function(t){var n=["idle","playing","ended","waiting","mediaerror"].map(function(e){return u+"state-"+e}).join(" ");return this.each(function(){t&&e.jme.data(this,e.extend(!0,{},t));var a,r,s,o,d,m,p,f,h=e("audio, video",this).filter(":first"),v=e(this),g=e(l,v),y=e.jme.getDOMList(e.jme.data(this,"controls")),j=g.add(e(y)),b=e.jme.data(this),w=e.jme.data(h[0]);v.addClass(h.prop("nodeName").toLowerCase()+"player"),w.player=v,w.media=h,b.media||(r=!0,f=!h.prop("autoplay"),m=function(){h.unbind("canplay",d),clearTimeout(p)},d=function(){var t=e.prop(this,"paused")?"idle":"playing";v.removeClass(n).addClass(u+"state-"+t)},a=function(t){var a,i,r=t.type;m(),"ended"==r||e.prop(this,"ended")?r="ended":"waiting"==r?e.prop(this,"readyState")>2?r="":(p=setTimeout(function(){h.prop("readyState")>2&&d()},9),h.bind("canPlay",d)):c[r]?r="idle":(a=e.prop(this,"readyState"),i=e.prop(this,"paused"),r=!i&&3>a?"waiting":!i&&a>2?"playing":"idle"),r&&v.removeClass(n).addClass(u+"state-"+r)},b.media=h,b.player=v,h.bind("ended",function(){m(),h.jmeFn("pause"),h.prop("autoplay")||h.prop("loop")||h.hasClass("no-reload")||h.jmeFn("load")}).bind("emptied waiting canplay canplaythrough playing ended pause mediaerror",a).bind("volumechange updateJMEState",function(){var t=e.prop(this,"volume");v[!t||e.prop(this,"muted")?"addClass":"removeClass"](u+"state-muted"),t=.34>t?"low":.67>t?"medium":"high",v.attr("data-volume",t)}).bind("emptied updateJMEState play playing waiting",function(t){var n;"emptied"==t.type||"updateJMEState"==t.type&&e.prop(this,"paused")?("emptied"==t.type&&(f=!h.prop("autoplay")),n="addClass"):("play"==t.type||"waiting"==t.type||"playing"==t.type)&&(n="removeClass"),n&&v[n](u+"state-initial")}),v.addClass(u+"userinactive").on({useractive:function(){v.addClass(u+"useractive").removeClass(u+"userinactive")},focusin:function(){clearTimeout(s),v.addClass(u+"focusenter")},focusout:function(){clearTimeout(s),s=setTimeout(function(){v.removeClass(u+"focusenter")},1)},"mouseenter focusin":function(){clearTimeout(o),v.addClass(u+"fover"),f&&i&&(h.prop("preload","auto"),f=!1)},"mouseleave focusout":function(){clearTimeout(o),o=setTimeout(function(){v.removeClass(u+"fover")},1)}}).on("userinactive",{idletime:3500},function(){v.removeClass(u+"useractive").addClass(u+"userinactive")})),v.jmeFn("addControls",j),r&&(b.controlbar&&v.jmeProp("controlbar",!0),a&&h.bind("updateJMEState",a).triggerHandler("updateJMEState"))})},e.jme.defineProp("isPlaying",{get:function(t){return!e.prop(t,"ended")&&!e.prop(t,"paused")&&e.prop(t,"readyState")>1&&!e.data(t,"mediaerror")},readonly:!0}),e.jme.defineProp("player",{readonly:!0}),e.jme.defineProp("media",{readonly:!0}),e.jme.defineProp("srces",{get:function(t){var n=e.jme.data(t),a=n.media.prop("src"),i=[];return a?[{src:a}]:i=e.map(e("source",n.media).get(),function(t){var n={src:e.prop(t,"src")},a=e.attr(t,"media");return a&&(n.media=a),a=e.attr(t,"type"),a&&(n.type=a),n})},set:function(t,n){var a=e.jme.data(t),i=function(t,n){"string"==typeof n&&(n={src:n}),e(document.createElement("source")).attr(n).appendTo(a.media)};return a.media.removeAttr("src").find("source").remove(),e.isArray(n)?e.each(n,i):i(0,n),a.media.jmeFn("load"),"noDataSet"}}),e.jme.defineMethod("togglePlay",function(){e(this).jmeFn(n.isPlaying.get(this)?"pause":"play")}),e.jme.defineProp("controlbar",{set:function(t,n){n=!!n;var a,i=e.jme.data(t),r=e("div.jme-default-media-overlay, div.jme-default-control-bar",i.player),s=e.jme.plugins["media-controls"],o="";return n&&!r[0]?i._controlbar?i._controlbar.appendTo(i.player):(i.media.prop("controls",!1),e.each(s.pluginOrder,function(t,n){var a=e.jme.plugins[n];a&&a.structure?o+=a.structure.replace("{%class%}",u+n).replace("{%text%}",a.text||""):n&&(o+=n)}),i._controlbar=e(s.barStructure),r=i._controlbar.find("div.jme-cb-box").addClass(u+"media-controls"),a=i._controlbar.filter(".jme-default-media-overlay").addClass(u+"play-pause"),a=a.add(r),a=a.add(e(o).appendTo(r)),i._controlbar.appendTo(i.player),i.player.jmeFn("addControls",a)):n||r.detach(),r=null,a=null,n}}),e.jme.defineMethod("addControls",function(t){var n=e.jme.data(this)||{};if(n.media){var a=e.jme.data(n.player[0],"controlElements")||e([]);t=e(t),e.each(e.jme.plugins,function(a,i){t.filter("."+i.className).add(t.find("."+i.className)).each(function(){var t=e(this),a=e.jme.data(this);a.player=n.player,a.media=n.media,a.rendered||(a.rendered=!0,i.options&&e.each(i.options,function(e,t){e in a||(a[e]=t)}),i._create(t,n.media,n.player,a),t=null)})}),e.jme.data(n.player[0],"controlElements",a.add(t)),n.player.triggerHandler("controlsadded")}}),e.jme.defineMethod("updateControlbar",function(){var t=e("."+e.jme.classNS+"time-slider",this);if(t[0]&&"absolute"!==t.css("position")){var n=Math.floor(t.parent().width())-.2,a=0;t.hide().siblings().each(function(){this!==t[0]&&"absolute"!==e.css(this,"position")&&"none"!==e.css(this,"display")&&(a+=Math.ceil(e(this).outerWidth(!0))+.1)}).end().show(),t.width(Math.floor(n-a-Math.ceil(t.outerWidth(!0)-t.width())-.3))}}),e.jme.registerPlugin("media-controls",{pluginOrder:["play-pause",'<div class="media-bar">',"currenttime-display","time-slider","duration-display",'<div class="volume-controls">',"mute-unmute","volume-slider","</div>","fullscreen",'<div class="subtitle-controls">',"captions","</div>","</div>"],barStructure:'<div class="jme-default-media-overlay"></div><div class="jme-default-control-bar" tabindex="-1"><div class="jme-cb-box"></div></div>',_create:function(t,n,a){var i,r=function(){clearTimeout(i),t.jmeFn("updateControlbar"),i=setTimeout(function(){t.jmeFn("updateControlbar")},9)};setTimeout(function(){n.bind("loadedmetadata volumechange play pause ended emptied",r),a.bind("updatetimeformat controlsadded controlschanged playerdimensionchange",r),e(window).bind("resize emchange",r)},1),r()}}),function(){var t={add:function(t,n,a){var i,r,s=e.data(t,"jmeuseractivity")||e.data(t,"jmeuseractivity",{idletime:2500,idle:!0,trigger:{}}),o=e(t),l=function(){s.idle||(s.idle=!0,s.trigger.userinactive&&o.trigger("userinactive"))},u=function(e){!e||"mousemove"===e.type&&e.pageX===i&&e.pageY===r||("mousemove"===e.type&&(i=e.pageX,r=e.pageY),s.idleTimer&&clearTimeout(s.idleTimer),s.idleTimer=setTimeout(l,s.idletime),s.idle&&(s.idle=!1,s.trigger.useractive&&o.trigger("useractive")))};s.idletime=(n||{}).idletime||s.idletime,n&&"idle"in n&&(s.idle=n.idle),s.trigger[a]=!0,s.bound||(o.bind("mouseleave.jmeuseractivity",l).bind("mousemove.jmeuseractivity focusin.jmeuseractivity mouseenter.jmeuseractivity keydown.jmeuseractivity keyup.jmeuseractivity mousedown.jmeuseractivity",u),s.bound=!0),s.idle||u({type:"initunidled"})},remove:function(t,n){var a=e.data(t,"jmeuseractivity")||e.data(t,"jmeuseractivity",{idletime:2500,idle:!0,trigger:{}});a.trigger[n]=!1,a.trigger.useractive||a.trigger.userinactive||(e(t).unbind(".jmeuseractivity"),a.bound=!1)}};e.each(["useractive","userinactive"],function(n,a){e.event.special[a]={setup:function(e){t.add(this,e,a)},teardown:function(){t.remove(this,a)}}})}()})(jQuery),function(e){function t(e,t){var n,a,i;return{get:function(){return i?void 0:e.apply(this,arguments)},set:function(){clearTimeout(n),clearTimeout(a);var e=this,r=arguments;i=!0,n=setTimeout(function(){t.apply(e,r),a=setTimeout(function(){i=!1},30)},0)}}}var n="pseudoClasses",a={play:1,playing:1},i={pause:1,ended:1};!(Modernizr.boxSizing||Modernizr["display-table"]||Modernizr.video||e.support.getSetAttribute);var r=function(){e.webshims.loader&&e.webshims.loader.loadList(["range-ui"])},s=function(t){r(),e.webshims.ready("range-ui",t)},o='<button class="{%class%}"><span class="jme-icon"></span><span class="jme-text">{%text%}</span></button>',l='<div  class="{%class%}"></div>',u='<div class="{%class%}"></div>';e.jme.registerPlugin("play-pause",{pseudoClasses:{play:"state-paused",pause:"state-playing"},structure:o,text:"play / pause",_create:function(t,r){var s=e.jme.getButtonText(t,[this[n].play,this[n].pause]);r.bind("play playing ended pause updateJMEState",function(e){var t=e.type;t=a[t]?1:i[t]?0:r.jmeProp("isPlaying")?1:0,s(t)}).triggerHandler("updateJMEState"),t.bind(t.is("select")?"change":"click",function(e){r.jmeFn("togglePlay"),e.stopPropagation()})}}),e.jme.registerPlugin("mute-unmute",{pseudoClasses:{mute:"state-mute",unmute:"state-unmute"},structure:o,text:"mute / unmute",_create:function(t,a){var i=e.jme.getButtonText(t,[this[n].mute,this[n].unmute]);a.bind("volumechange updateJMEState",function(){i(a.prop("muted")?1:0)}).triggerHandler("updateJMEState"),t.bind(t.is("select")?"change":"click",function(e){a.prop("muted",!a.prop("muted")),e.stopPropagation()})}}),e.jme.registerPlugin("volume-slider",{structure:u,_create:function(e,n){r();var a=function(){var a,i;i=t(function(){var e=n.prop("volume");void 0!==e&&a.value(e)},function(){n.prop({muted:!1,volume:a.options.value})}),a=e.rangeUI({min:0,max:1,step:"any",input:function(){i.set()}}).data("rangeUi"),n.bind("volumechange",i.get)};s(a)}}),e.jme.registerPlugin("time-slider",{structure:u,pseudoClasses:{no:"no-duration"},options:{format:["mm","ss"]},_create:function(a,i,o){r();var l=this,u=function(){var r,s,u,c,d=e.jme.classNS+"has-duration";e.jme.classNS+"no-duration";var m=i.prop("duration");r=t(function(){var e=i.prop("currentTime");if(!isNaN(e))try{u.value(e)}catch(t){}},function(){try{i.prop("currentTime",u.options.value).triggerHandler("timechanged",[u.options.value])}catch(e){}}),s=function(){m=i.prop("duration"),d=m&&isFinite(m)&&!isNaN(m),d?(u.disabled(!1),u.max(m),o.removeClass(l[n].no)):(u.disabled(!0),u.max(Number.MAX_VALUE),o.addClass(l[n].no))},u=a.rangeUI({min:0,value:i.prop("currentTime")||0,step:"any",input:function(){r.set()},textValue:function(e){return i.jmeFn("formatTime",e)}}).data("rangeUi"),c=e('<span class="'+e.jme.classNS+'time-select" />').appendTo(a),a.on({mouseenter:function(t){if(d){var n=(a.offset()||{left:0}).left,r=a.innerWidth(),s=function(e){var t=100*((e-n)/r);c.html(i.jmeFn("formatTime",m*t/100)).css({left:t+"%"})};s(t.pageX),c.addClass(e.jme.classNS+"show-time-select"),a.off(".jmetimeselect").on("mousemove.jmetimeselect",function(e){s(e.pageX)})}},mouseleave:function(){c.removeClass(e.jme.classNS+"show-time-select"),a.off(".jmetimeselect")}}),i.bind({timeupdate:r.get,emptied:function(){s(),u.value(0)},durationchange:s}),o.jmeFn("addControls",e('<div class="'+e.jme.classNS+'buffer-progress" />').prependTo(a)),s()};s(u)}}),e.jme.defineMethod("concerningRange",function(t,n){var a=this,i={start:0,end:0};if(t||(t="buffered"),t=e.prop(a,t),null==n&&(n=e.prop(a,"currentTime")),!(t&&"length"in t))return i;for(var r=0,s=t.length;s>r&&(i.start=t.start(r),i.end=t.end(r),!(n>=i.start&&i.end>=n));r++);return i}),e.jme.defineProp("progress",{get:function(t){var n=e.jme.data(t);if(!n.media)return 0;var a=100*(n.media.jmeFn("concerningRange").end/n.media.prop("duration"));return a>99.4&&(a=100),a||0},readonly:!0}),e.jme.registerPlugin("buffer-progress",{_create:function(t,n,a,i){var r=e('<div class="'+e.jme.classNS+'buffer-progress-indicator" />').appendTo(t),s=function(){var e=n.jmeProp("progress");i.progress!==e&&(i.progress=e,r.css("width",e+"%"))};n.bind({progress:s,emptied:function(){r.css("width",0),i.progress=0},playing:s}),s()}});var c={hh:6e4,mm:60,ss:1,ms:.001},d=function(t,n){var a;n||(n=["mm","ss"]),null==t&&(a=e.jme.data(this),t=e.prop(a.media,"duration")),t||(t=0);for(var i,r=[],s=0,o=n.length;o>s;s++)"ms"==n[s]&&s==o-1?i=Math.round(t/c[n[s]]/10):(i=parseInt(t/c[n[s]],10),t%=c[n[s]]),10>i&&(i="0"+i),r.push(i);return r.join(":")};e.jme.defineMethod("formatTime",d),e.jme.defineProp("format",{set:function(t,n){e.isArray(n)||(n=n.split(":"));var a=e.jme.data(t);return a.format=n,e(t).triggerHandler("updatetimeformat"),a.player.triggerHandler("updatetimeformat"),"noDataSet"}}),e.jme.registerPlugin("duration-display",{structure:l,options:{format:"mm:ss"},_create:function(e,t,n,a){"string"==typeof a.format&&(a.format=a.format.split(":"));var i=function(){e.html(d(t.prop("duration"),a.format))};t.bind("durationchange emptied",i),e.bind("updatetimeformat",i).jmeProp("format",a.format)}}),e.jme.defineProp("countdown",{set:function(t,n){var a=e.jme.data(t);return a.countdown=!!n,e(t).triggerHandler("updatetimeformat"),a.player.triggerHandler("updatetimeformat"),"noDataSet"}}),e.jme.registerPlugin("currenttime-display",{structure:l,options:{format:"mm:ss",countdown:!1},_create:function(e,t,n,a){"string"==typeof a.format&&(a.format=a.format.split(":"));var i=function(){var n=t.prop("currentTime");a.countdown&&(n=(t.prop("duration")||0)-n,.7>n&&(n=0)),e.html(d(n,a.format))};t.bind("timeupdate emptied durationchange",i),e.bind("updatetimeformat",i).jmeProp("format",a.format)}}),e.jme.registerPlugin("poster-display",{structure:"<div />",options:{},_create:function(t,n){var a=function(){var a=n.prop("poster");a?t.html('<span></span><img src="'+a+'" class="'+e.jme.classNS+'poster-image" />'):t.empty()};n.bind("emptied",a),a()}})}(jQuery),function(e){var t;e.jme.startJME=function(){t||(e.webshims.loader&&setTimeout(function(){e.webshims.loader.loadList(["range-ui"])},0),e(function(){e.jme.createSelectors(),e.jme.initJME(document,e([]))}),e.webshims.ready("mediaelement",function(){e.webshims.addReady(function(t,n){t!==document&&e.jme.initJME(t,n)})}),t=!0)},e(window).trigger("jmepluginready")}(jQuery),function(e){var t=window.jQuery;t.jme?e(t):t(window).on("jmepluginready",function(){e(t)})}(function(e){var t='<button class="{%class%}"><span class="jme-icon"></span><span class="jme-text">{%text%}</span></button>',n="pseudoClasses";e.jme.fullscreen=function(){var t,n,a=document.documentElement,i={supportsFullScreen:Modernizr.prefixed("fullscreenEnabled",document,!1)||Modernizr.prefixed("fullScreenEnabled",document,!1),isFullScreen:function(){return!1},requestFullScreen:function(a){var i;t=[],e(a).parentsUntil("body").each(function(){var n,a=e.css(this,"position"),r=this.scrollLeft,s=this.scrollTop;i={elemStyle:this.style,elem:this},"static"!==a&&(n=!0,i.pos=i.elemStyle.position,this.style.position="static"),r&&(n=!0,i.left=r),s&&(n=!0,i.top=s),n&&t.push(i)}),n=!1;try{n={elemStyle:frameElement.style,elem:frameElement,css:{}},n.css.position=n.elemStyle.position,n.elemStyle.position="fixed",e.each(["top","left","right","bottom"],function(e,t){n.css[t]=n.elemStyle[t],n.elemStyle[t]="0px"}),e.each(["height","width"],function(e,t){n.css[t]=n.elemStyle[t],n.elemStyle[t]="100%"})}catch(r){n=!1}i=null},cancelFullScreen:function(){t&&(e.each(t,function(e,t){"pos"in t&&(t.elemStyle.position=t.pos),t.left&&(t.elem.scrollLeft=t.left),t.top&&(t.elem.scrollTop=t.top),t=null}),t=[]),n&&(e.each(n.css,function(e,t){n.elemStyle[e]=t}),n=!1)},eventName:"fullscreenchange",exitName:"exitFullscreen",requestName:"requestFullscreen",elementName:"fullscreenElement",enabledName:""};return i.cancelFullWindow=i.cancelFullScreen,i.requestFullWindow=i.requestFullScreen,i.supportsFullScreen&&(i.enabledName=i.supportsFullScreen,i.exitName=Modernizr.prefixed("exitFullscreen",document,!1)||Modernizr.prefixed("cancelFullScreen",document,!1),i.elementName=Modernizr.prefixed("fullscreenElement",document,!1)||Modernizr.prefixed("fullScreenElement",document,!1),i.supportsFullScreen=!!i.supportsFullScreen,("fullscreenElement"!=i.elementName||"exitFullscreen"!=i.exitName||"fullscreenEnabled"!=i.enabledName)&&e.each(Modernizr._domPrefixes,function(e,t){var n=t+"RequestFullscreen";return n in a||(n=t+"RequestFullScreen")&&n in a?(i.eventName=t+"fullscreenchange",i.requestName=n,!1):void 0}),i.isFullScreen=function(){return document[i.elementName]},i.requestFullScreen=function(e){return e[i.requestName]()},i.cancelFullScreen=function(){return document[i.exitName]()}),window.Modernizr&&"fullscreen"in Modernizr||e("html").addClass(i.supportsFullScreen?"fullscreen":"no-fullscreen"),window.parent!=window&&function(){try{var t=window.frameElement;t.style,i.supportsFullScreen&&("allowfullscreen"in t&&!t.allowfullscreen?t.allowfullscreen=!0:(null==t.getAttribute("webkitallowfullscreen")&&t.setAttribute("webkitallowfullscreen",""),null==t.getAttribute("allowfullscreen")&&t.setAttribute("allowfullscreen","allowfullscreen")))}catch(n){i.supportsFullScreen||e("html").addClass("no-fullwindow")}}(),i}(),e.jme.defineProp("fullscreen",{set:function(t,n){var a=e.jme.data(t);if(!a||!a.player)return"noDataSet";if(n){if(a.player.hasClass(e.jme.classNS+"player-fullscreen"))return"noDataSet";if(a.scrollPos={top:e(window).scrollTop(),left:e(window).scrollLeft()},e(document).unbind(".jmefullscreen").bind("keydown.jmefullscreen",function(e){return 27==e.keyCode?(a.player.jmeProp("fullscreen",!1),!1):32!==e.keyCode||"form"in e.target?void 0:(a.media.jmeFn("togglePlay"),!1)}),"fullwindow"==n)e.jme.fullscreen.requestFullWindow(a.player[0]);else try{e.jme.fullscreen.requestFullScreen(a.player[0])}catch(i){}e("html").addClass(e.jme.classNS+"has-media-fullscreen"),a.player.addClass(e.jme.classNS+"player-fullscreen"),a.media.addClass(e.jme.classNS+"media-fullscreen"),e(".jme-default-control-bar",a.player).focus(),e.jme.fullscreen.supportsFullScreen&&e(document).bind(e.jme.fullscreen.eventName+".jmefullscreen",function(){var n=e.jme.fullscreen.isFullScreen();n&&t==n?e(t).triggerHandler("playerdimensionchange",["fullscreen"]):a.player.jmeProp("fullscreen",!1)}),a.player.triggerHandler("playerdimensionchange",["fullwindow"])}else{if(!a.player.hasClass(e.jme.classNS+"player-fullscreen"))return"noDataSet";if(e(document).unbind(".jmefullscreen"),e("html").removeClass(e.jme.classNS+"has-media-fullscreen"),a.player.removeClass(e.jme.classNS+"player-fullscreen"),a.media.removeClass(e.jme.classNS+"media-fullscreen"),e.jme.fullscreen.isFullScreen())try{e.jme.fullscreen.cancelFullScreen()}catch(i){}else e.jme.fullscreen.cancelFullWindow();a.player.triggerHandler("playerdimensionchange"),a.scrollPos&&(e(window).scrollTop(a.scrollPos.top),e(window).scrollLeft(a.scrollPos.left),delete a.scrollPos)}return"noDataSet"},get:function(t){var n=e.jme.data(t);if(n&&n.player){var a=n.player.hasClass(e.jme.classNS+"player-fullscreen");return a?e.jme.fullscreen.isFullScreen()||"fullwindow":!1}}}),e.jme.defineProp("autoplayfs"),e.jme.registerPlugin("fullscreen",{pseudoClasses:{enter:"state-enterfullscreen",exit:"state-exitfullscreen"},options:{fullscreen:!0,autoplayfs:!1},structure:t,text:"enter fullscreen / exit fullscreen",_create:function(t,a,i){var r=e.jme.getButtonText(t,[this[n].enter,this[n].exit]),s=function(){r(i.hasClass(e.jme.classNS+"player-fullscreen")?1:0)},o=this.options,l=function(){e(i.data("jme").controlElements).filter(".jme-default-media-overlay").off(".dblfullscreen").on("dblclick.dblfullscreen",function(){i.jmeProp("fullscreen",!i.jmeProp("fullscreen"))})};i.on("controlsadded",l),i.bind("playerdimensionchange",s),t.bind(t.is("select")?"change":"click",function(){var t=i.hasClass(e.jme.classNS+"player-fullscreen")?!1:o.fullscreen;i.jmeProp("fullscreen",t),t&&o.autoplayfs&&a.jmeFn("play")}),l(),s()}})}),function(e){var t=window.jQuery;t.jme?e(t):t(window).on("jmepluginready",function(){e(t)})}(function(e){var t='<button class="{%class%}"><span class="jme-icon"></span><span class="jme-text">{%text%}</span></button>',n="pseudoClasses";e.jme.ButtonMenu=function(t,n,a){this.button=e(t).attr({"aria-haspopup":"true"}),this.clickHandler=a,this.toggle=e.proxy(this,"toggle"),this.keyIndex=e.proxy(this,"keyIndex"),this._buttonClick=e.proxy(this,"_buttonClick"),this.addMenu(n),this._closeFocusOut(),this.button.bind("click",this.toggle)},e.jme.ButtonMenu.prototype={addMenu:function(t){this.menu&&this.menu.remove(),this.menu=e(t),this.buttons=e("button",this.menu),this.menu.insertAfter(this.button),this.menu.bind("keydown",this.keyIndex).delegate("button","click",this._buttonClick)},_closeFocusOut:function(){var e,t=this,n=function(){clearTimeout(e),setTimeout(function(){clearTimeout(e)},9)};this.menu.parent().bind("focusin",n).bind("mousedown",n).bind("focusout",function(){e=setTimeout(function(){t.hide()},40)})},_buttonClick:function(e){this.clickHandler(this.buttons.index(e.currentTarget),e.currentTarget),this.hide()},keyIndex:function(e){var t=40==e.keyCode?1:38==e.keyCode?-1:0;if(t){var n=this.buttons.not(":disabled"),a=n.filter(":focus");a=n[n.index(a)+t]||n.filter(t>0?":first":":last"),a.focus(),e.preventDefault()}},show:function(){if(!this.isVisible){var t=this.buttons.not(":disabled");this.isVisible=!0,this.menu.addClass("visible-menu");try{this.activeElement=document.activeElement||this.button[0]}catch(n){this.activeElement=this.button[0]}setTimeout(function(){e(t.filter('[aria-checked="true"]')[0]||t[0]).focus()},60)}},toggle:function(){this[this.isVisible?"hide":"show"]()},hide:function(){if(this.isVisible){if(this.isVisible=!1,this.menu.removeClass("visible-menu"),this.activeElement)try{this.activeElement.focus()}catch(e){}this.activeElement=!1}}};var a={subtitles:1,caption:1},i=function(t){var n=e.map(t,function(e){var t="caption"==e.kind?"caption-type":"subtitle-type",n=e.language;return n=n?' <span class="track-lang">'+n+"</span>":"",'<li class="'+t+'" role="presentation"><button role="menuitemcheckbox">'+e.label+n+"</button></li>"});return"<div><ul>"+n.join("")+"</ul></div>"};e.jme.registerPlugin("captions",{pseudoClasses:{enabled:"state-captionsenabled",disabled:"state-captionsdisabled",noTrack:"no-track",hasTrack:"has-track",menu:"subtitle-menu"},structure:t,text:"subtitles menu",_create:function(t,r,s){var o=this,l=r.find("track"),u=e("span.jme-text, +label span.jme-text",t);u[0]||(u=t),u.html(o.text),l.length?s.addClass(o[n].hasTrack):(t.prop("disabled",!0),s.addClass(o[n].noTrack)),e.webshims.ready("track",function(){function l(n){d?d.addMenu(n):d=new e.jme.ButtonMenu(t,n,function(t,n){"true"==e.attr(n,"aria-checked")?m[t].mode="disabled":e.each(m,function(e,n){n.mode=e==t?"showing":"disabled"}),r.prop("textTracks"),u()}),u()}function u(){e("button",d.menu).each(function(t){e.attr(this,"aria-checked","showing"==m[t].mode?"true":"false")})}function c(){m=[],e.each(p,function(e,t){a[t.kind]&&3!=t.readyState&&m.push(t)}),m.length?(l('<div class="'+o[n].menu+'" >'+i(m)+"</div>"),(!s.hasClass(o[n].hasTrack)||s.hasClass(o[n].noTrack))&&(t.prop("disabled",!1),s.addClass(o[n].hasTrack).removeClass(o[n].noTrack).triggerHandler("controlschanged"))):(!s.hasClass(o[n].noTrack)||s.hasClass(o[n].hasTrack))&&(t.prop("disabled",!0),s.addClass(o[n].noTrack).removeClass(o[n].hasTrack).triggerHandler("controlschanged"))}var d,m=[],p=r.prop("textTracks"),f=function(){var e,t;return function(n){clearTimeout(e),clearTimeout(t),"updatesubtitlestate"==n.type&&(t=setTimeout(function(){r.trigger("updatetracklist")},0)),e=setTimeout(c,19)}}();p?(c(),e([p]).on("addtrack removetrack",f),s.bind("updatesubtitlestate",f),r.bind("updatetrackdisplay",function(){var e;return function(){clearTimeout(e),e=setTimeout(u,20)}}())):(p=[],c())})}})});