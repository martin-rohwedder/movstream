(function(e){var t=window.jQuery;t.jme?e(t):t(window).on("jmepluginready",function(){e(t)})})(function(e){var t='<button class="{%class%}"><span class="jme-icon"></span><span class="jme-text">{%text%}</span></button>',n="pseudoClasses";e.jme.fullscreen=function(){var t,n,a=document.documentElement,r={supportsFullScreen:Modernizr.prefixed("fullscreenEnabled",document,!1)||Modernizr.prefixed("fullScreenEnabled",document,!1),isFullScreen:function(){return!1},requestFullScreen:function(a){var r;t=[],e(a).parentsUntil("body").each(function(){var n,a=e.css(this,"position"),i=this.scrollLeft,s=this.scrollTop;r={elemStyle:this.style,elem:this},"static"!==a&&(n=!0,r.pos=r.elemStyle.position,this.style.position="static"),i&&(n=!0,r.left=i),s&&(n=!0,r.top=s),n&&t.push(r)}),n=!1;try{n={elemStyle:frameElement.style,elem:frameElement,css:{}},n.css.position=n.elemStyle.position,n.elemStyle.position="fixed",e.each(["top","left","right","bottom"],function(e,t){n.css[t]=n.elemStyle[t],n.elemStyle[t]="0px"}),e.each(["height","width"],function(e,t){n.css[t]=n.elemStyle[t],n.elemStyle[t]="100%"})}catch(i){n=!1}r=null},cancelFullScreen:function(){t&&(e.each(t,function(e,t){"pos"in t&&(t.elemStyle.position=t.pos),t.left&&(t.elem.scrollLeft=t.left),t.top&&(t.elem.scrollTop=t.top),t=null}),t=[]),n&&(e.each(n.css,function(e,t){n.elemStyle[e]=t}),n=!1)},eventName:"fullscreenchange",exitName:"exitFullscreen",requestName:"requestFullscreen",elementName:"fullscreenElement",enabledName:""};return r.cancelFullWindow=r.cancelFullScreen,r.requestFullWindow=r.requestFullScreen,r.supportsFullScreen&&(r.enabledName=r.supportsFullScreen,r.exitName=Modernizr.prefixed("exitFullscreen",document,!1)||Modernizr.prefixed("cancelFullScreen",document,!1),r.elementName=Modernizr.prefixed("fullscreenElement",document,!1)||Modernizr.prefixed("fullScreenElement",document,!1),r.supportsFullScreen=!!r.supportsFullScreen,("fullscreenElement"!=r.elementName||"exitFullscreen"!=r.exitName||"fullscreenEnabled"!=r.enabledName)&&e.each(Modernizr._domPrefixes,function(e,t){var n=t+"RequestFullscreen";return n in a||(n=t+"RequestFullScreen")&&n in a?(r.eventName=t+"fullscreenchange",r.requestName=n,!1):void 0}),r.isFullScreen=function(){return document[r.elementName]},r.requestFullScreen=function(e){return e[r.requestName]()},r.cancelFullScreen=function(){return document[r.exitName]()}),window.Modernizr&&"fullscreen"in Modernizr||e("html").addClass(r.supportsFullScreen?"fullscreen":"no-fullscreen"),window.parent!=window&&function(){try{var t=window.frameElement;t.style,r.supportsFullScreen&&("allowfullscreen"in t&&!t.allowfullscreen?t.allowfullscreen=!0:(null==t.getAttribute("webkitallowfullscreen")&&t.setAttribute("webkitallowfullscreen",""),null==t.getAttribute("allowfullscreen")&&t.setAttribute("allowfullscreen","allowfullscreen")))}catch(n){r.supportsFullScreen||e("html").addClass("no-fullwindow")}}(),r}(),e.jme.defineProp("fullscreen",{set:function(t,n){var a=e.jme.data(t);if(!a||!a.player)return"noDataSet";if(n){if(a.player.hasClass(e.jme.classNS+"player-fullscreen"))return"noDataSet";if(a.scrollPos={top:e(window).scrollTop(),left:e(window).scrollLeft()},e(document).unbind(".jmefullscreen").bind("keydown.jmefullscreen",function(e){return 27==e.keyCode?(a.player.jmeProp("fullscreen",!1),!1):32!==e.keyCode||"form"in e.target?void 0:(a.media.jmeFn("togglePlay"),!1)}),"fullwindow"==n)e.jme.fullscreen.requestFullWindow(a.player[0]);else try{e.jme.fullscreen.requestFullScreen(a.player[0])}catch(r){}e("html").addClass(e.jme.classNS+"has-media-fullscreen"),a.player.addClass(e.jme.classNS+"player-fullscreen"),a.media.addClass(e.jme.classNS+"media-fullscreen"),e(".jme-default-control-bar",a.player).focus(),e.jme.fullscreen.supportsFullScreen&&e(document).bind(e.jme.fullscreen.eventName+".jmefullscreen",function(){var n=e.jme.fullscreen.isFullScreen();n&&t==n?e(t).triggerHandler("playerdimensionchange",["fullscreen"]):a.player.jmeProp("fullscreen",!1)}),a.player.triggerHandler("playerdimensionchange",["fullwindow"])}else{if(!a.player.hasClass(e.jme.classNS+"player-fullscreen"))return"noDataSet";if(e(document).unbind(".jmefullscreen"),e("html").removeClass(e.jme.classNS+"has-media-fullscreen"),a.player.removeClass(e.jme.classNS+"player-fullscreen"),a.media.removeClass(e.jme.classNS+"media-fullscreen"),e.jme.fullscreen.isFullScreen())try{e.jme.fullscreen.cancelFullScreen()}catch(r){}else e.jme.fullscreen.cancelFullWindow();a.player.triggerHandler("playerdimensionchange"),a.scrollPos&&(e(window).scrollTop(a.scrollPos.top),e(window).scrollLeft(a.scrollPos.left),delete a.scrollPos)}return"noDataSet"},get:function(t){var n=e.jme.data(t);if(n&&n.player){var a=n.player.hasClass(e.jme.classNS+"player-fullscreen");return a?e.jme.fullscreen.isFullScreen()||"fullwindow":!1}}}),e.jme.defineProp("autoplayfs"),e.jme.registerPlugin("fullscreen",{pseudoClasses:{enter:"state-enterfullscreen",exit:"state-exitfullscreen"},options:{fullscreen:!0,autoplayfs:!1},structure:t,text:"enter fullscreen / exit fullscreen",_create:function(t,a,r){var i=e.jme.getButtonText(t,[this[n].enter,this[n].exit]),s=function(){i(r.hasClass(e.jme.classNS+"player-fullscreen")?1:0)},o=this.options,l=function(){e(r.data("jme").controlElements).filter(".jme-default-media-overlay").off(".dblfullscreen").on("dblclick.dblfullscreen",function(){r.jmeProp("fullscreen",!r.jmeProp("fullscreen"))})};r.on("controlsadded",l),r.bind("playerdimensionchange",s),t.bind(t.is("select")?"change":"click",function(){var t=r.hasClass(e.jme.classNS+"player-fullscreen")?!1:o.fullscreen;r.jmeProp("fullscreen",t),t&&o.autoplayfs&&a.jmeFn("play")}),l(),s()}})});